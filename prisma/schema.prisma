// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
}

enum CredentialDeviceType {
  singleDevice
  multiDevice
}

enum AuthenticatorTransportFuture {
  ble
  cable
  hybrid
  internal
  nfc
  smartcard
  usb
}


model passkeys {
  id String @id
  publicKey Bytes @db.ByteA
  userId String @unique
  webauthnUserID String @unique
  counter BigInt
  deviceType CredentialDeviceType
  backedUp Boolean @default(false)
  transports AuthenticatorTransportFuture[] 
  createdAt DateTime @default(now())
  lastUsedAt DateTime @updatedAt
  user User @relation(fields: [userId], references: [id])

  @@index([webauthnUserID])
}

model User {
  id        String   @id @default(uuid())
  username  String   @unique
  name      String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  passkeys  passkeys[]
  analitics analitics[]
}

enum mariageStatus {
  divorced
  married
  single
  unknown
}

enum Status {
  yes
  no
  unknown
}

enum days {
  monday
  tuesday
  wednesday
  thursday
  friday
  saturday
  sunday
}

enum months {
  january
  february
  march
  april
  may
  june
  july
  august
  september
  october
  november
  december
}

enum subscribeStatus {
  failure
  nonexistent
  success
}

model customers {
  id Int @id @default(autoincrement())
  name String
  age Int
  campaign Int
  job String
  education String
  marital mariageStatus
  contact String
  day_of_week String
  month String
  default Status
  housing Status
  loan Status
  duration Int
  pdays Int
  previous Int
  poutcome String
  emp_var_rate Float
  cons_price_idx Float
  cons_conf_idx Float
  euribor3m Float
  nr_employed Int
  has_credit Status
  last_day_contacted days
  last_month_contacted months
  how_many_contacted_now Int
  how_many_contacted_previous Int
  days_last_contacted Int
  result_of_last_campaign subscribeStatus
  analitics analitics[]
  predict predict[]
}


model predict {
  id Int @id @default(autoincrement())
  id_customer Int
  predictive_subscribe String
  predictive_score_subscribe Float
  customer customers @relation(fields: [id_customer], references: [id])
}
model analitics {
  id Int @id @default(autoincrement())
  id_user String
  id_customer Int
  status subscribeStatus
  customer customers @relation(fields: [id_customer], references: [id])
  user User @relation(fields: [id_user], references: [id])
}